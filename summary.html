<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Andy P. Barrett">
<meta name="dcterms.date" content="2023-04-29">

<title>Data Strategies for a Future Us</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="summary_files/libs/clipboard/clipboard.min.js"></script>
<script src="summary_files/libs/quarto-html/quarto.js"></script>
<script src="summary_files/libs/quarto-html/popper.min.js"></script>
<script src="summary_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="summary_files/libs/quarto-html/anchor.min.js"></script>
<link href="summary_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="summary_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="summary_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="summary_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="summary_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="summary_files/libs/quarto-diagram/mermaid.min.js"></script>
<script src="summary_files/libs/quarto-diagram/mermaid-init.js"></script>
<link href="summary_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#what-are-data-strategies" id="toc-what-are-data-strategies" class="nav-link" data-scroll-target="#what-are-data-strategies">What are Data Strategies?</a></li>
  <li><a href="#who-is-a-future-us" id="toc-who-is-a-future-us" class="nav-link" data-scroll-target="#who-is-a-future-us">Who is a future us?</a></li>
  <li><a href="#a-simple-data-workflow" id="toc-a-simple-data-workflow" class="nav-link" data-scroll-target="#a-simple-data-workflow">A simple data workflow</a></li>
  <li><a href="#collaborative-and-reproducible-workflows" id="toc-collaborative-and-reproducible-workflows" class="nav-link" data-scroll-target="#collaborative-and-reproducible-workflows">Collaborative and reproducible workflows</a>
  <ul class="collapse">
  <li><a href="#where-to-process-data" id="toc-where-to-process-data" class="nav-link" data-scroll-target="#where-to-process-data">Where to process data?</a></li>
  </ul></li>
  <li><a href="#how-to-future-proof-workflows-and-make-them-reproducible" id="toc-how-to-future-proof-workflows-and-make-them-reproducible" class="nav-link" data-scroll-target="#how-to-future-proof-workflows-and-make-them-reproducible">How to future-proof workflows and make them reproducible</a></li>
  <li><a href="#document-the-analysis" id="toc-document-the-analysis" class="nav-link" data-scroll-target="#document-the-analysis">Document the Analysis</a></li>
  <li><a href="#make-sure-data-are-findable-and-accessible" id="toc-make-sure-data-are-findable-and-accessible" class="nav-link" data-scroll-target="#make-sure-data-are-findable-and-accessible">Make sure data are <strong>F</strong>indable and <strong>A</strong>ccessible</a></li>
  <li><a href="#data-management" id="toc-data-management" class="nav-link" data-scroll-target="#data-management">Data Management</a></li>
  <li><a href="#use-standard-file-formats-and-include-metadata" id="toc-use-standard-file-formats-and-include-metadata" class="nav-link" data-scroll-target="#use-standard-file-formats-and-include-metadata">Use standard file formats and include metadata</a>
  <ul class="collapse">
  <li><a href="#common-file-formats" id="toc-common-file-formats" class="nav-link" data-scroll-target="#common-file-formats">Common File Formats</a></li>
  </ul></li>
  <li><a href="#metadata-metadata-metadata" id="toc-metadata-metadata-metadata" class="nav-link" data-scroll-target="#metadata-metadata-metadata">Metadata, metadata, metadata</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Strategies for a Future Us</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Andy P. Barrett </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">2023-04-29</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>We are all data wranglers or data scientists. It is our job to collect data, process data, analyse data and generate results in the forms of plots, tables and eventually new knowledge. In the past, many of us have done this work in isolation, we store data on our laptops, sharing files by email or dropbox, google drive, etc as needed. This approach has mostly worked. However, more collaborative, and more open and reproducible ways of working, as well as increases in data volumes, and ways of accessing data requires us to find new, or at least modified, data strategies.</p>
</section>
<section id="what-are-data-strategies" class="level2">
<h2 class="anchored" data-anchor-id="what-are-data-strategies">What are Data Strategies?</h2>
<p>Collaborating with a research team or the wider scientific community requires us to solve problems of data access and share knowledge about how data was analyzed. How do we make data available to others? Howa. do we document the processing steps? Can you remember how a dataset you processed last week was cleaned? If your computer crashes or get’s stolen could you reproduce your processing workflow easily? When it comes to submit a paper, finish a project, hand off to someone else on the team, or pick up a project after vacation; how easy is it to do this. Data strategies, used in this context, is a catchall term that includes where to process data (locally or on a remote system), how to document and manage data processing for a future you or others, how to make this data accessible to others, how to make the processing and analysis workflows reproducible.</p>
</section>
<section id="who-is-a-future-us" class="level2">
<h2 class="anchored" data-anchor-id="who-is-a-future-us">Who is a future us?</h2>
<p>A future us is first and foremost, you tomorrow or next week when you pick up a project again, you next month when you discover you discover a problem with the data, or in siz months to a year from now when “reviewer 2” requests major changes. It is other members of your team who might want to work with the data and want to know where it came from and how it was processed. And it is the wider scientific community who may want to reproduce your work.</p>
</section>
<section id="a-simple-data-workflow" class="level2">
<h2 class="anchored" data-anchor-id="a-simple-data-workflow">A simple data workflow</h2>
<div class="cell">
<div class="cell-output-display">
<div>
<p>

</p><pre class="mermaid mermaid-js" data-tooltip-selector="#mermaid-tooltip-1">flowchart TD
    A["Collect Data
    Field, Remote Sensing, Model"] --&gt;B[Clean Data\nCalibration, QC, Reprojection] --&gt;C[Aggregate\nTime or spatial means] --&gt;D[Analysis] --&gt;E[Make Plots and Tables] --&gt;F[Write Manuscript]
    F-- Review --&gt;B
    E-- Iterate--&gt;C
</pre>
<div id="mermaid-tooltip-1" class="mermaidTooltip">

</div>
<p></p>
</div>
</div>
</div>
</section>
<section id="collaborative-and-reproducible-workflows" class="level2">
<h2 class="anchored" data-anchor-id="collaborative-and-reproducible-workflows">Collaborative and reproducible workflows</h2>
<section id="where-to-process-data" class="level3">
<h3 class="anchored" data-anchor-id="where-to-process-data">Where to process data?</h3>
<ul>
<li>Download data to Local Machine and process locally</li>
<li>Do some processing in cloud to reduce data size</li>
<li>Do all of your processing in the cloud</li>
</ul>
<p>Depends on data volume:<br>
- how long will it take to download (Mbps);<br>
- Can you store all that data (cost and space);<br>
- Do you have the computing power for processing;<br>
- Does your team need a common computing environment;<br>
- Do you need to share data at each step or just an end product.</p>
</section>
</section>
<section id="how-to-future-proof-workflows-and-make-them-reproducible" class="level2">
<h2 class="anchored" data-anchor-id="how-to-future-proof-workflows-and-make-them-reproducible">How to future-proof workflows and make them reproducible</h2>
<p><strong>FAIR</strong> - <strong>F</strong>indable, <strong>A</strong>ccessible, <strong>I</strong>nteroperable, <strong>R</strong>eusable applies to the future you and your tean as well.</p>
</section>
<section id="document-the-analysis" class="level2">
<h2 class="anchored" data-anchor-id="document-the-analysis">Document the Analysis</h2>
<p>Document each step. Where did you get the data, which files, which version. Write it down. Anywhere is good but using a script is better. Example: <code>earthaccess</code>, <code>wget</code> or <code>curl</code></p>
<p>Can you (or anyone else) easily reproduce your processing pipeline. Having it scripted so just a few commands can set the process going is really helpful.</p>
<p>How can this be done with GUI interfaces? E.g. ArcGIS, QGIS, Excel - screenshots, journal commands.</p>
</section>
<section id="make-sure-data-are-findable-and-accessible" class="level2">
<h2 class="anchored" data-anchor-id="make-sure-data-are-findable-and-accessible">Make sure data are <strong>F</strong>indable and <strong>A</strong>ccessible</h2>
<p>Does everyone know where you data is and can they access it? <em>E.g. A shared machine, DropBox, Google Drive, Cloud Storage.</em></p>
</section>
<section id="data-management" class="level2">
<h2 class="anchored" data-anchor-id="data-management">Data Management</h2>
<p>Raw data is immutable<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>!</p>
<p>Save intermediate data not just final - saves processing time if you have to redo one or a few steps.</p>
<p>Use consistent folder and file name patterns.</p>
<pre><code>(base) nsidc-442-abarrett:data_strategies_for_a_future_us$ tree Data
Data
├── calibrated
├── cleaned
├── figures
├── final
├── monthly_averages
├── raw
└── results

7 directories, 0 files</code></pre>
<p>Setup config files to both document filepaths and patterns but also so your scripts can use these without hardcoding them into code.</p>
<pre><code>from pathlib import Path

DATAPATH = Path.home() / path_to_project / Data
RAW_DATA_PATH = DATAPATH / raw
CLEANED_DATA_PATH = DATAPATH / cleaned
FINAL_DATA_PATH = DATAPATH / final
MONTHLY_PATH = DATAPATH / monthly_averages
RESULTS_PATH = DATAPATH / results   # Path for final results tables
                                    # and files
FIGURES_PATH = DATAPATH / figures   # Path for plots etc.</code></pre>
<p>In any script you can then do something like…</p>
<pre><code>from filepaths import FINAL_DATA_PATH

files = FINAL_DATA_PATH.glob('*')</code></pre>
</section>
<section id="use-standard-file-formats-and-include-metadata" class="level2">
<h2 class="anchored" data-anchor-id="use-standard-file-formats-and-include-metadata">Use standard file formats and include metadata</h2>
<p>It can take time to set up but it will save time in the long run.<br>
Use metadata standards.</p>
<section id="common-file-formats" class="level3">
<h3 class="anchored" data-anchor-id="common-file-formats">Common File Formats</h3>
<ul>
<li>GeoTIFF for imagery or 2D raster data<br>
</li>
<li>NetCDF for multi-dimensional data (3D+)<br>
</li>
<li>Shapefiles or GeoJSON for vector data<br>
</li>
<li>csv for tabular data (Make it <em>tidy</em><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>)</li>
</ul>
<p>If you are working in the cloud, <em>C</em>loud <em>O</em>ptimized <em>F</em>ormats can help. Avoid Excel and proprietary formats.</p>
</section>
</section>
<section id="metadata-metadata-metadata" class="level2">
<h2 class="anchored" data-anchor-id="metadata-metadata-metadata">Metadata, metadata, metadata</h2>
<p>Metadata makes your data to be interoperable and reusable.</p>
<p>Metadata standards and conventions ensure that standard tools can read/interpret the data, and that there is a common reference/ontology<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>. Not always perfect but worth following.</p>
<ul>
<li>What is the CRS<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> (projection, grid mapping) of the data?<br>
</li>
<li>What are the units?<br>
</li>
<li>What is the variable name?<br>
</li>
<li>What is the source of the data?<br>
</li>
<li>What script produced the data?</li>
</ul>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>The file cannot be changed after it is created<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>A framework for organising tabular data. See <a href="https://doi.org/10.18637/jss.v059.i10">Wickham, 2014. <em>Tidy Data</em></a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>A formal naming convention<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Coordinate Reference System<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>